<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Blog AJAX</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body>

<h2>Search Blog</h2>

<form id="searchForm">
    <input type="text" id="searchTitle" placeholder="Enter title...">
    <button>Search</button>
</form>

<hr>

<div id="blogList"></div>
<button id="loadMore">Load More</button>

</body>
<script>
    let page = 0;
    function loadBlogs(rs = false) {
        if (rs){
            page = 0;
            $("#blogList").html("");
        }
        $.get("/api/blogs", {
            searchTitle: $("#searchTitle").val(),
            page: page
        }, function (resp) {
            if (!resp||!resp.content){
                $("#blogList").html("NO DATA");
                return;
            }
            resp.content.forEach(blog=>{
                $("#blogList").append(
                    `<div>
                          <h3>${blog.title}</h3>
                          <p>${blog.content}</p>
                     </div>`
                );
            });
            if (resp.last){
                $("#loadMore").hide();
            }else {
                $("#loadMore").show();
            }
        })
    }

    $("#searchForm").submit(function (e) {
        e.preventDefault();
        loadBlogs(true);
    });
    $("#loadMore").click(function (){
        page++;
        loadBlogs(false);
    });

</script>
</html>
